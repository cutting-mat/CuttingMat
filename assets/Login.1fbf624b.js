import{n as t,l as a,S as e,e as s}from"./index.4ba80ac1.js";import"./ui.98a3144a.js";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flex-row align-center justify-center loginPage"},[e("div",[e("h1",{staticClass:"main-title"},[t._v("平台名称文字占位符后台管理系统")]),e("el-form",{ref:"validForm",staticClass:"login-form",attrs:{model:t.formData,rules:t.rules},nativeOn:{submit:function(a){return a.preventDefault(),t.login.apply(null,arguments)}}},[e("h2",{staticClass:"sub-title"},[e("span",{staticClass:"_text"},[t._v("请登录")])]),e("el-form-item",{attrs:{prop:"account"}},[e("el-input",{attrs:{autofocus:!0,placeholder:"输入用户名"},model:{value:t.formData.account,callback:function(a){t.$set(t.formData,"account",a)},expression:"formData.account"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{placeholder:"输入密码",type:"password","show-password":""},model:{value:t.formData.password,callback:function(a){t.$set(t.formData,"password",a)},expression:"formData.password"}})],1),e("el-form-item",{attrs:{prop:"captcha"}},[e("InputCaptchaImage",{ref:"InputCaptchaImage"})],1),e("div",{staticClass:"flex-row align-center"},[e("div",{staticClass:"flex-1"}),e("el-link",{attrs:{type:"info"},on:{click:t.handleChangePw}},[t._v(" 忘记密码？ ")])],1),e("el-form-item",{staticClass:"submit-item"},[e("el-button",{staticClass:"submit-button",attrs:{"native-type":"submit",type:"primary",loading:t.loading}},[t._v("登录")])],1),e("div",{staticClass:"flex-row"},[e("div",{staticClass:"flex-1"}),e("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push({name:"注册"})}}},[t._v(" 立即注册 "),e("i",{staticClass:"el-icon-right"})])],1)],1),e("div",{staticClass:"footer-info"},[t._v(" @2022 版权所有 占位文字 "),e("span",{staticClass:"_s"},[t._v("|")]),t._v(" Github： "),e("el-link",{attrs:{type:"primary",href:"https://github.com/cutting-mat",target:"_blank"}},[t._v("cutting-mat")])],1)],1),e("auth",{ref:"auth",attrs:{types:["email","mobile"],command:"reset"}})],1)},i=[];const l={};var o=t({data(){return{loading:!1,formData:{account:"",password:"",captcha:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],captcha:[{validator:()=>new Promise(((t,a)=>{this.formData.captcha?t():this.$refs.InputCaptchaImage.valid().then((a=>{console.log("then",a),this.formData.captcha=a,t()})).catch((t=>{console.log("catch",t),a(t)}))})),trigger:[]}]}}},methods:{login(){if(this.loading)return null;this.loading=!0,this.$refs.validForm.validate((t=>{t?a(this.formData).then((t=>{200===t.status?(this.loading=!1,e(t.data),s.emit("login",(()=>{this.$router.replace({path:this.$router.currentRoute.query.redirect||"/"})}))):this.$message({message:"登陆失败",type:"warning"})})).catch((()=>{this.loading=!1})):this.loading=!1}))},handleChangePw(){this.$refs.auth.auth().then((t=>{this.$router.push({name:"修改密码",query:{authCode:t}})}))}}},r,i,!1,n,"79f40ef2",null,null);function n(t){for(let a in l)this[a]=l[a]}var c=function(){return o.exports}();export{c as default};
