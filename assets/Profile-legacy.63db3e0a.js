!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t,a,r,n,i,o){try{var s=e[i](o),l=s.value}catch(u){return void a(u)}s.done?t(l):Promise.resolve(l).then(r,n)}var n=document.createElement("style");n.innerHTML=".upload_avatar[data-v-5a5b87a8]{display:block;width:200px;height:200px;margin:0 auto 20px;line-height:200px;background:#dedede;text-align:center;cursor:pointer}.upload_avatar img[data-v-5a5b87a8]{width:200px;height:200px;object-fit:cover}\n",document.head.appendChild(n),System.register(["./account-legacy.fac2aa75.js","./index-legacy.c15b5d39.js","./ui-legacy.f2062c2b.js"],(function(e){"use strict";var a,n,i;return{setters:[function(e){a=e.e,n=e.d},function(e){i=e.n},function(){}],execute:function(){var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ToolBar"),e.userDetail&&e.userDetail.id?a("div",{staticClass:"infoBox wrap"},[a("uploader",{staticClass:"upload_avatar",attrs:{accept:"t-image",value:e.userDetail.avatarExt?[{url:e.userDetail.avatarExt.url}]:[],imgCrop:"","show-file-list":!1,"on-success":e.handleUpload}},[e.userDetail.avatarExt?a("img",{attrs:{src:e.userDetail.avatarExt.url,alt:""}}):a("span",[e._v("上传头像")])]),a("el-form",{attrs:{"label-width":"80px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"用户名"}},[e._v(e._s(e.userDetail.name))]),a("el-form-item",{attrs:{label:"密码"}},[a("el-button",{attrs:{type:"text"},on:{click:e.handleChangePw}},[e._v(" 修改密码 "),a("i",{staticClass:"el-icon-edit"})])],1),a("el-form-item",{attrs:{label:"手机号"}},[e._v(e._s(e.userDetail.mobile))]),a("el-form-item",{attrs:{label:"所属组织"}},[e._v(e._s(e.userDetail.org&&e.userDetail.org.name))])],1),a("el-form",{ref:"validForm",attrs:{model:e.userDetail,rules:e.rules,"label-width":"80px","label-position":"right",size:"small"},nativeOn:{submit:function(e){return e.preventDefault(),function(){}.apply(null,arguments)}}},[a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{model:{value:e.userDetail.address,callback:function(t){e.$set(e.userDetail,"address",t)},expression:"userDetail.address"}})],1),a("el-form-item",{attrs:{label:"个人介绍",prop:"introduction"}},[a("el-input",{model:{value:e.userDetail.introduction,callback:function(t){e.$set(e.userDetail,"introduction",t)},expression:"userDetail.introduction"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" 保 存 ")])],1)],1)],1):e._e(),a("auth",{ref:"auth",attrs:{types:["password","email","mobile"]}})],1)},s={data:function(){return{loading:!1,userDetail:{},rules:{}}},computed:{userInfo:function(){return this.$store.state.user}},watch:{userInfo:{handler:function(){this.userInfo&&this.userInfo.id&&this.fetchData()},immediate:!0}},methods:{handleSubmit:function(){var e=this;this.$refs.validForm.validate(function(){var t,a=(t=regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&e.doSubmit(e.userDetail);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var o=t.apply(e,a);function s(e){r(o,n,i,s,l,"next",e)}function l(e){r(o,n,i,s,l,"throw",e)}s(void 0)}))});return function(e){return a.apply(this,arguments)}}())},doSubmit:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,a(t(t({},this.userDetail),r)).then((function(){e.$store.action("user",{cache:"update"}).then((function(){e.loading=!1,e.$message.success("更新成功！")}))})).catch((function(){e.loading=!1}))},handleUpload:function(e){e.id&&this.doSubmit({avatar:e.id})},handleChangePw:function(){var e=this;this.$refs.auth.auth().then((function(t){e.$router.push({name:"修改密码",query:{authCode:t}})}))},fetchData:function(){var e=this;this.loading=!0,n({id:this.userInfo.id}).then((function(t){e.loading=!1,e.userDetail=t.data})).catch((function(){e.loading=!1}))}}},l={},u=i(s,o,[],!1,c,"5a5b87a8",null,null);function c(e){for(var t in l)this[t]=l[t]}e("default",function(){return u.exports}())}}}))}();
