!function(){var t=document.createElement("style");t.innerHTML=".auth_email[data-v-54a9a2c0] .el-input-group__append{background-color:#409eff;border:0}.auth_email[data-v-54a9a2c0] .el-input-group__append .el-button{border-radius:0;margin:0 -20px}.auth_email[data-v-54a9a2c0] .el-input-group__append .countdownButton{color:#fff;background-color:#409eff;border:1px solid #409eff}.auth_email[data-v-54a9a2c0] .el-input-group__append .el-button.is-disabled{background-color:#a0cfff;border-color:#a0cfff}\n",document.head.appendChild(t),System.register(["./index-legacy.f4fa04a9.js","./ui-legacy.2c1236a5.js"],(function(t){"use strict";var a,e,n,r;return{setters:[function(t){a=t.n,e=t.h,n=t.j,r=t.k},function(){}],execute:function(){var i={},o=a({data:function(){var t=this;return{loading:!1,formData:{id:null,userInput:null,inputEmail:null},rules:{inputEmail:[{validator:function(a,e,n){if(e){if(!t.userEmail)return r({email:e}).then((function(a){a.data?(t.token=a.data,n()):n(new Error("邮箱不存在"))}));if(t.userEmail!==e)return n(new Error("邮箱不正确"));n()}else n(new Error("请输入安全邮箱"))},trigger:[]}],userInput:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:6,message:"请输入正确的验证码",trigger:"blur"}]},token:null}},computed:{userEmail:function(){return this.$store.state.user.email||""},anonymousEmail:function(){if(this.userEmail){var t=this.userEmail.split("@")[0].split(""),a=t.map((function(a,e){return 0===e||e===t.length-1?a:"*"})).join("");return"".concat(a,"@").concat(this.userEmail.split("@")[1])}return""}},methods:{sendValidCode:function(){var t=this;this.$refs.form.validateField("inputEmail",(function(a){a||(t.loading=!0,e({email:t.formData.inputEmail}).then((function(a){t.loading=!1,200===a.status?(t.formData.id=a.data.id,t.$refs.countdownButton.start()):t.$message.warning("验证邮件发送失败，请稍后重试")})).catch((function(){t.loading=!1})))}))},handleSubmit:function(){var t=this;this.$refs.form.validateField("userInput",(function(a){a||(t.loading=!0,n(t.formData).then((function(a){t.loading=!1,200===a.status?t.$emit("success",a.data,t.token):(t.$refs.form.resetFields(),t.$message.warning("验证失败"))})).catch((function(){t.loading=!1})))}))}}},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-form",{ref:"form",staticClass:"auth_email",attrs:{model:t.formData,rules:t.rules,"label-position":"left","v-loading":t.loading}},[t.anonymousEmail?e("el-form-item",[t._v("安全邮箱："+t._s(t.anonymousEmail))]):t._e(),e("el-form-item",{attrs:{prop:"inputEmail"}},[e("el-input",{attrs:{placeholder:"请输入安全邮箱","prefix-icon":"el-icon-message"},model:{value:t.formData.inputEmail,callback:function(a){t.$set(t.formData,"inputEmail",a)},expression:"formData.inputEmail"}})],1),e("el-form-item",{attrs:{prop:"userInput"}},[e("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.formData.userInput,callback:function(a){t.$set(t.formData,"userInput",a)},expression:"formData.userInput"}},[e("countdownButton",{ref:"countdownButton",attrs:{slot:"append",count:30},on:{click:t.sendValidCode},slot:"append"},[t._v("获取验证码")])],1)],1),e("el-form-item",[e("el-button",{staticStyle:{width:"100%"},attrs:{"native-type":"button",type:"primary"},on:{click:t.handleSubmit}},[t._v("立即验证")])],1)],1)}),[],!1,u,"54a9a2c0",null,null);function u(t){for(var a in i)this[a]=i[a]}t("default",function(){return o.exports}())}}}))}();
