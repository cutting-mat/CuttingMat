!function(){var e=document.createElement("style");e.innerHTML=".auth_mobile[data-v-a976a788] .el-input-group__append{background-color:#409eff;border:0}.auth_mobile[data-v-a976a788] .el-input-group__append .el-button{border-radius:0;margin:0 -20px}.auth_mobile[data-v-a976a788] .el-input-group__append .countdownButton{color:#fff;background-color:#409eff;border:1px solid #409eff}.auth_mobile[data-v-a976a788] .el-input-group__append .el-button.is-disabled{background-color:#a0cfff;border-color:#a0cfff}\n",document.head.appendChild(e),System.register(["./index-legacy.124bc8d1.js","./ui-legacy.d1d9d8b1.js"],(function(e){"use strict";var t,n,o,r;return{setters:[function(e){t=e.n,n=e.s,o=e.k,r=e.m},function(){}],execute:function(){var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",staticClass:"auth_mobile",attrs:{model:e.formData,rules:e.rules,"label-position":"left","v-loading":e.loading},nativeOn:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e.anonymousMobile?n("el-form-item",[e._v("绑定手机："+e._s(e.anonymousMobile))]):e._e(),n("el-form-item",{attrs:{prop:"inputMobile"}},[n("el-input",{attrs:{placeholder:"请输入绑定手机","prefix-icon":"el-icon-message"},model:{value:e.formData.inputMobile,callback:function(t){e.$set(e.formData,"inputMobile",t)},expression:"formData.inputMobile"}})],1),n("el-form-item",{attrs:{prop:"userInput"}},[n("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.formData.userInput,callback:function(t){e.$set(e.formData,"userInput",t)},expression:"formData.userInput"}},[n("CountdownButton",{ref:"countdownButton",attrs:{slot:"append",count:30},on:{click:e.sendValidCode},slot:"append"},[e._v(" 获取验证码 ")])],1)],1),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{"native-type":"submit",type:"primary"}},[e._v(" 立即验证 ")])],1)],1)},i={},u=t({props:{command:{type:String,required:!1}},data:function(){var e=this;return{loading:!1,formData:{id:null,userInput:null,inputMobile:null},rules:{inputMobile:[{validator:function(t,n,o){if(n){if(e.userMobile&&e.userMobile!==n)return o(new Error("手机号不正确"));o()}else o(new Error("请输入绑定手机"))},trigger:[]}],userInput:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:6,message:"请输入正确的验证码",trigger:"blur"}]}}},computed:{userMobile:function(){return String(this.$store.state.user.mobile||"")},anonymousMobile:function(){if(this.userMobile){var e=this.userMobile.split(""),t=e.map((function(t,n){return n<3||e.length-n<3?t:"*"})).join("");return"".concat(t)}return""}},methods:{sendValidCode:function(){var e=this;console.log("sendValidCode"),this.$refs.form.validateField("inputMobile",(function(t){t||(e.loading=!0,("reset-pw"===e.command?n:o)({mobile:e.formData.inputMobile}).then((function(t){e.loading=!1,200===t.status?(e.formData.id=t.data.id,e.$refs.countdownButton.start()):e.$message.warning("验证码发送失败，请稍后重试")})).catch((function(){e.loading=!1})))}))},handleSubmit:function(){var e=this;this.$refs.form.validateField("userInput",(function(t){t||(e.loading=!0,r(e.formData).then((function(t){e.loading=!1,200===t.status?e.$emit("success",t.data):(e.$refs.form.resetFields(),e.$message.warning("验证失败"))})).catch((function(){e.loading=!1})))}))}}},a,[],!1,l,"a976a788",null,null);function l(e){for(var t in i)this[t]=i[t]}e("default",function(){return u.exports}())}}}))}();
